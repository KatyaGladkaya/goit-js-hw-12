{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchImages = async (searchQuery, page = 1) => {\n  const API_KEY = '48887234-fe7a8c0ecfa7b9a43b5097f7a';\n  const URL = `https://pixabay.com/api/`;\n\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 40,\n      },\n    });\n\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching data: ', error);\n    throw error;\n  }\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function showToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nexport function clearGallery(galleryElement) {\n  galleryElement.innerHTML = '';\n}\n\nexport function createImageCard(image) {\n  const card = document.createElement('div');\n  card.classList.add('gallery-item');\n\n  card.innerHTML = `\n    <a href=\"${image.largeImageURL}\" target=\"_blank\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n    </a>\n    <div class=\"info\">\n      <p>Likes: ${image.likes}</p>\n      <p>Views: ${image.views}</p>\n      <p>Comments: ${image.comments}</p>\n      <p>Downloads: ${image.downloads}</p>\n    </div>\n  `;\n  return card;\n}\n\nexport function renderImages(images, galleryElement) {\n  images.forEach(image => {\n    const imageCard = createImageCard(image);\n    galleryElement.appendChild(imageCard);\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { showToast, clearGallery, renderImages } from './js/render-functions';\n\nlet lightbox;\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\nconst endMessage = document.querySelector('.end-message');\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nasync function fetchAndRenderImages(query, page) {\n  try {\n    const { hits, totalHits: total } = await fetchImages(query, page);\n\n    if (hits.length === 0) {\n      showToast(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    } else {\n      renderImages(hits, gallery);\n      const firstImageCard = gallery.querySelector('.gallery-item');\n      if (firstImageCard) {\n        const cardHeight = firstImageCard.getBoundingClientRect().height;\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n      }\n\n      if (lightbox) {\n        lightbox.refresh();\n      } else {\n        lightbox = new SimpleLightbox('.gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      }\n\n      loadMoreButton.style.display = 'block';\n    }\n\n    totalHits = total;\n    if (currentPage * 40 >= totalHits) {\n      loadMoreButton.style.display = 'none';\n      showToast(\"We're sorry, but you've reached the end of search results.\");\n      endMessage.style.display = 'block';\n    }\n  } catch (error) {\n    showToast('Failed to fetch images. Please try again later.');\n  } finally {\n    hideLoader();\n  }\n}\n\nsearchForm.addEventListener('submit', function (e) {\n  e.preventDefault();\n\n  const query = searchInput.value.trim();\n\n  if (!query) {\n    showToast('Please enter a search query.');\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n\n  showLoader();\n  clearGallery(gallery);\n\n  endMessage.style.display = 'none';\n\n  fetchAndRenderImages(query, currentPage);\n\n  loadMoreButton.style.display = 'none';\n});\n\nloadMoreButton.addEventListener('click', function () {\n  currentPage += 1;\n  showLoader();\n\n  fetchAndRenderImages(currentQuery, currentPage);\n});\n"],"names":["fetchImages","searchQuery","page","API_KEY","URL","response","axios","error","showToast","message","iziToast","clearGallery","galleryElement","createImageCard","image","card","renderImages","images","imageCard","lightbox","currentPage","currentQuery","totalHits","searchForm","searchInput","gallery","loader","loadMoreButton","endMessage","showLoader","hideLoader","fetchAndRenderImages","query","hits","total","firstImageCard","cardHeight","SimpleLightbox","e"],"mappings":"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"}